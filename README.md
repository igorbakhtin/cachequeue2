# Тестовое задание txt.me

Вводные: есть клиенты и бекэнд, взаимодействие происходит по rest. 
Возникающие нештатные ситуации: бекенд оказывается недоступным на N секунд, 
за это время клиенты отправляют 100-1000 сообщений системе
Задача: реализовать кеширующую прокси с очередью, обеспечить гарантирующее 
доставку всех запросов на бекенд после его восстановления.

Использовать только java без сторонних библиотек.
Приложение должно быть многопоточным с функциями кеширования.

# Реализация
### Бахтин Игорь igor.bakhtin@gmail.com 

22.11.2020  

Реализовано на LinkedBlockingQueue. 
Если бекэнд в рабочем состоянии, то очередь не используется. Это сделано специально, чтобы не гонять зря сообщения через очередь.  
Как только бекэнд падает, включается очередь и все новые сообщения складываются в нее. 
Очередь пытается отправлять на бекэнд сообщение отдельным потоком через каждую 1 секунду.
Можно было сделать увеличивающийся таймаут между запросами, но не стал, так как поток всего один отправляет.     
Как только хотя бы одно сообщение проходит успешно на бэкенд, то все новые сообщения снова начинают идти напрямую.
Размер очереди задается через конфиг параметр cachequeue.capacity

Тесты - в ProxyControllerTest

   
